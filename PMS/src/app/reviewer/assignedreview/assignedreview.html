<div class="review-container">
  <!-- Header Section -->
  <div class="review-header">
    <div class="header-content">
      <h1 class="page-title">Submit Review</h1>
      <p class="page-subtitle">Review assigned research papers and provide feedback</p>
    </div>
    <div class="header-actions">
      <button class="btn-secondary" (click)="filterReviews()">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M3 4h18M3 12h12M3 20h6" stroke-width="2" stroke-linecap="round"/>
        </svg>
        Filter
      </button>
      <button class="btn-primary" (click)="refreshReviews()">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M21 12a9 9 0 11-9-9c2.52 0 4.93 1 6.74 2.74L21 8" stroke-width="2" stroke-linecap="round"/>
          <path d="M21 3v5h-5" stroke-width="2" stroke-linecap="round"/>
        </svg>
        Refresh
      </button>
    </div>
  </div>

  <!-- Stats Cards -->
  <div class="stats-grid">
    <div class="stat-card pending">
      <div class="stat-icon">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <circle cx="12" cy="12" r="10" stroke-width="2"/>
          <path d="M12 6v6l4 2" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </div>
      <div class="stat-content">
        <h3 class="stat-value">{{pendingReviews}}</h3>
        <p class="stat-label">Pending Reviews</p>
      </div>
    </div>

    <div class="stat-card progress">
      <div class="stat-icon">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M12 2v20M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </div>
      <div class="stat-content">
        <h3 class="stat-value">{{inProgressReviews}}</h3>
        <p class="stat-label">In Progress</p>
      </div>
    </div>

    <div class="stat-card completed">
      <div class="stat-icon">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M9 11l3 3L22 4" stroke-width="2" stroke-linecap="round"/>
          <path d="M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </div>
      <div class="stat-content">
        <h3 class="stat-value">{{completedReviews}}</h3>
        <p class="stat-label">Completed</p>
      </div>
    </div>

    <div class="stat-card overdue">
      <div class="stat-icon">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <circle cx="12" cy="12" r="10" stroke-width="2"/>
          <path d="M12 8v4M12 16h.01" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </div>
      <div class="stat-content">
        <h3 class="stat-value">{{overdueReviews}}</h3>
        <p class="stat-label">Overdue</p>
      </div>
    </div>
  </div>

  <!-- Filters Section -->
  <div class="filters-section" [class.active]="showFilters">
    <div class="filter-group">
      <label>Status</label>
      <select [(ngModel)]="selectedStatus" (change)="applyFilters()">
        <option value="">All Status</option>
        <option value="pending">Pending</option>
        <option value="in-progress">In Progress</option>
        <option value="completed">Completed</option>
        <option value="overdue">Overdue</option>
      </select>
    </div>

    <div class="filter-group">
      <label>Priority</label>
      <select [(ngModel)]="selectedPriority" (change)="applyFilters()">
        <option value="">All Priorities</option>
        <option value="high">High</option>
        <option value="medium">Medium</option>
        <option value="low">Low</option>
      </select>
    </div>

    <div class="filter-group">
      <label>Due Date</label>
      <input type="date" [(ngModel)]="selectedDueDate" (change)="applyFilters()"/>
    </div>

    <button class="btn-clear" (click)="clearFilters()">Clear Filters</button>
  </div>

  <!-- Reviews List -->
  <div class="reviews-list">
    <div class="list-header">
      <h2>Assigned Papers</h2>
      <div class="search-box">
        <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <circle cx="11" cy="11" r="8" stroke-width="2"/>
          <path d="M21 21l-4.35-4.35" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <input type="text" placeholder="Search papers..." [(ngModel)]="searchQuery" (input)="searchReviews()"/>
      </div>
    </div>

    <!-- Empty State -->
    <div class="empty-state" *ngIf="filteredReviews.length === 0">
      <svg class="empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" stroke-width="2"/>
      </svg>
      <h3>No Reviews Found</h3>
      <p>You don't have any assigned reviews at the moment.</p>
    </div>

    <!-- Review Cards -->
    <div class="review-card" *ngFor="let review of filteredReviews" [class]="review.status">
      <div class="card-header">
        <div class="paper-info">
          <h3 class="paper-title">{{review.title}}</h3>
          <p class="paper-authors">{{review.authors}}</p>
        </div>
        <div class="card-badges">
          <span class="badge priority" [class]="review.priority">{{review.priority}}</span>
          <span class="badge status" [class]="review.status">{{review.statusLabel}}</span>
        </div>
      </div>

      <div class="card-body">
        <div class="paper-meta">
          <div class="meta-item">
            <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke-width="2"/>
              <line x1="16" y1="2" x2="16" y2="6" stroke-width="2" stroke-linecap="round"/>
              <line x1="8" y1="2" x2="8" y2="6" stroke-width="2" stroke-linecap="round"/>
              <line x1="3" y1="10" x2="21" y2="10" stroke-width="2"/>
            </svg>
            <span>Assigned: {{review.assignedDate}}</span>
          </div>
          <div class="meta-item">
            <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <circle cx="12" cy="12" r="10" stroke-width="2"/>
              <path d="M12 6v6l4 2" stroke-width="2" stroke-linecap="round"/>
            </svg>
            <span class="due-date" [class.overdue]="review.isOverdue">Due: {{review.dueDate}}</span>
          </div>
          <div class="meta-item">
            <svg class="meta-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M9 12h6M9 16h6M9 8h6M5 5h14a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2z" stroke-width="2"/>
            </svg>
            <span>Category: {{review.category}}</span>
          </div>
        </div>

        <div class="paper-abstract">
          <p>{{review.abstract}}</p>
        </div>

        <div class="progress-section" *ngIf="review.status === 'in-progress'">
          <div class="progress-header">
            <span>Review Progress</span>
            <span class="progress-value">{{review.progress}}%</span>
          </div>
          <div class="progress-bar">
            <div class="progress-fill" [style.width.%]="review.progress"></div>
          </div>
        </div>
      </div>

      <div class="card-actions">
        <button class="btn-action secondary" (click)="downloadPaper(review)">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3" stroke-width="2" stroke-linecap="round"/>
          </svg>
          Download
        </button>
        <button class="btn-action secondary" (click)="viewDetails(review)">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" stroke-width="2"/>
            <circle cx="12" cy="12" r="3" stroke-width="2"/>
          </svg>
          View Details
        </button>
        <button class="btn-action primary" (click)="startReview(review)" *ngIf="review.status === 'pending'">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5M18 3l-7 7M15 3h6v6" stroke-width="2" stroke-linecap="round"/>
          </svg>
          Start Review
        </button>
        <button class="btn-action primary" (click)="continueReview(review)" *ngIf="review.status === 'in-progress'">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5M18 3l-7 7M15 3h6v6" stroke-width="2" stroke-linecap="round"/>
          </svg>
          Continue Review
        </button>
        <button class="btn-action completed" (click)="viewReview(review)" *ngIf="review.status === 'completed'">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M9 11l3 3L22 4" stroke-width="2" stroke-linecap="round"/>
            <path d="M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11" stroke-width="2" stroke-linecap="round"/>
          </svg>
          View Review
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Review Modal -->
<div class="modal-overlay" *ngIf="showModal" (click)="closeModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>{{modalTitle}}</h2>
      <button class="btn-close" (click)="closeModal()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M18 6L6 18M6 6l12 12" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>
    </div>
    <div class="modal-body">
      <p>{{modalContent}}</p>
    </div>
  </div>
</div>