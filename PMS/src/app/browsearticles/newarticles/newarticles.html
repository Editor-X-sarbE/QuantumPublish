<div class="articles-container">
  <!-- Header Section -->
  <div class="articles-header">
    <div class="header-content">
      <h1 class="page-title">New Articles</h1>
      <p class="page-subtitle">Browse and discover recently published research papers</p>
    </div>
    <div class="header-actions">
      <button class="btn-secondary" (click)="toggleFilters()">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M3 4h18M3 12h12M3 20h6" stroke-width="2" stroke-linecap="round"/>
        </svg>
        Filter
      </button>
      <button class="btn-primary" (click)="refreshArticles()">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M21 12a9 9 0 11-9-9c2.52 0 4.93 1 6.74 2.74L21 8" stroke-width="2" stroke-linecap="round"/>
          <path d="M21 3v5h-5" stroke-width="2" stroke-linecap="round"/>
        </svg>
        Refresh
      </button>
    </div>
  </div>

  <!-- Stats Cards -->
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-icon" style="background: rgba(59, 130, 246, 0.1); color: #3b82f6;">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M9 12h6M9 16h6M9 8h6M5 5h14a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2z" stroke-width="2"/>
        </svg>
      </div>
      <div class="stat-content">
        <h3 class="stat-value">{{totalArticles}}</h3>
        <p class="stat-label">Total Articles</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" stroke-width="2"/>
        </svg>
      </div>
      <div class="stat-content">
        <h3 class="stat-value">{{todayArticles}}</h3>
        <p class="stat-label">Published Today</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b;">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M7 7h10M7 12h10M7 17h10" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </div>
      <div class="stat-content">
        <h3 class="stat-value">{{categoriesCount}}</h3>
        <p class="stat-label">Categories</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon" style="background: rgba(139, 92, 246, 0.1); color: #8b5cf6;">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" stroke-width="2"/>
          <path d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" stroke-width="2"/>
        </svg>
      </div>
      <div class="stat-content">
        <h3 class="stat-value">{{totalViews}}</h3>
        <p class="stat-label">Total Views</p>
      </div>
    </div>
  </div>

  <!-- Filters Section -->
  <div class="filters-section" [class.active]="showFilters">
    <div class="filter-group">
      <label>Category</label>
      <select [(ngModel)]="selectedCategory" (change)="applyFilters()">
        <option value="">All Categories</option>
        <option *ngFor="let category of categories" [value]="category">{{category}}</option>
      </select>
    </div>

    <div class="filter-group">
      <label>Date Range</label>
      <select [(ngModel)]="selectedDateRange" (change)="applyFilters()">
        <option value="all">All Time</option>
        <option value="today">Today</option>
        <option value="week">This Week</option>
        <option value="month">This Month</option>
      </select>
    </div>

    <div class="filter-group">
      <label>Sort By</label>
      <select [(ngModel)]="selectedSort" (change)="applyFilters()">
        <option value="newest">Newest First</option>
        <option value="oldest">Oldest First</option>
        <option value="views">Most Viewed</option>
        <option value="title">Title (A-Z)</option>
      </select>
    </div>

    <button class="btn-clear" (click)="clearFilters()">Clear Filters</button>
  </div>

  <!-- Search and View Toggle -->
  <div class="toolbar">
    <div class="search-box">
      <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <circle cx="11" cy="11" r="8" stroke-width="2"/>
        <path d="M21 21l-4.35-4.35" stroke-width="2" stroke-linecap="round"/>
      </svg>
      <input type="text" placeholder="Search articles by title, author, or keywords..." [(ngModel)]="searchQuery" (input)="searchArticles()"/>
    </div>
    <div class="view-toggle">
      <button [class.active]="viewMode === 'grid'" (click)="setViewMode('grid')" title="Grid View">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <rect x="3" y="3" width="7" height="7" stroke-width="2"/>
          <rect x="14" y="3" width="7" height="7" stroke-width="2"/>
          <rect x="3" y="14" width="7" height="7" stroke-width="2"/>
          <rect x="14" y="14" width="7" height="7" stroke-width="2"/>
        </svg>
      </button>
      <button [class.active]="viewMode === 'list'" (click)="setViewMode('list')" title="List View">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <line x1="8" y1="6" x2="21" y2="6" stroke-width="2" stroke-linecap="round"/>
          <line x1="8" y1="12" x2="21" y2="12" stroke-width="2" stroke-linecap="round"/>
          <line x1="8" y1="18" x2="21" y2="18" stroke-width="2" stroke-linecap="round"/>
          <line x1="3" y1="6" x2="3.01" y2="6" stroke-width="2" stroke-linecap="round"/>
          <line x1="3" y1="12" x2="3.01" y2="12" stroke-width="2" stroke-linecap="round"/>
          <line x1="3" y1="18" x2="3.01" y2="18" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>
    </div>
  </div>

  <!-- Articles Grid/List -->
  <div class="articles-wrapper" [class.list-view]="viewMode === 'list'">
    <!-- Empty State -->
    <div class="empty-state" *ngIf="filteredArticles.length === 0">
      <svg class="empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M9 12h6M9 16h6M9 8h6M5 5h14a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2z" stroke-width="2"/>
      </svg>
      <h3>No Articles Found</h3>
      <p>Try adjusting your filters or search query.</p>
    </div>

    <!-- Article Cards -->
    <div class="article-card" *ngFor="let article of filteredArticles">
      <div class="card-image">
        <img [src]="article.thumbnail" [alt]="article.title">
        <div class="card-badge">
          <span class="badge-new" *ngIf="article.isNew">New</span>
          <span class="badge-trending" *ngIf="article.isTrending">ðŸ”¥ Trending</span>
        </div>
      </div>
      
      <div class="card-content">
        <div class="card-header">
          <span class="category-badge">{{article.category}}</span>
          <div class="card-meta">
            <span class="views">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" stroke-width="2"/>
                <path d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" stroke-width="2"/>
              </svg>
              {{article.views}}
            </span>
          </div>
        </div>

        <h3 class="article-title">{{article.title}}</h3>
        
        <div class="article-authors">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" stroke-width="2"/>
          </svg>
          <span>{{article.authors}}</span>
        </div>

        <p class="article-abstract">{{article.abstract}}</p>

        <div class="article-footer">
          <div class="date-info">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <rect x="3" y="4" width="18" height="18" rx="2" stroke-width="2"/>
              <line x1="16" y1="2" x2="16" y2="6" stroke-width="2" stroke-linecap="round"/>
              <line x1="8" y1="2" x2="8" y2="6" stroke-width="2" stroke-linecap="round"/>
              <line x1="3" y1="10" x2="21" y2="10" stroke-width="2"/>
            </svg>
            <span>{{article.publishedDate}}</span>
          </div>

          <div class="card-actions">
            <button class="btn-icon" (click)="viewArticle(article)" title="View Details">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" stroke-width="2"/>
                <path d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" stroke-width="2"/>
              </svg>
            </button>
            <button class="btn-icon" (click)="downloadArticle(article)" title="Download">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </button>
            <button class="btn-icon" [class.active]="article.isBookmarked" (click)="toggleBookmark(article)" title="Bookmark">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" [attr.fill]="article.isBookmarked ? 'currentColor' : 'none'">
                <path d="M19 21l-7-5-7 5V5a2 2 0 012-2h10a2 2 0 012 2z" stroke-width="2"/>
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Pagination -->
  <div class="pagination" *ngIf="totalPages > 1">
    <button class="page-btn" [disabled]="currentPage === 1" (click)="goToPage(currentPage - 1)">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M15 18l-6-6 6-6" stroke-width="2" stroke-linecap="round"/>
      </svg>
      Previous
    </button>

    <div class="page-numbers">
      <button *ngFor="let page of getPageNumbers()" 
              class="page-number" 
              [class.active]="page === currentPage"
              (click)="goToPage(page)">
        {{page}}
      </button>
    </div>

    <button class="page-btn" [disabled]="currentPage === totalPages" (click)="goToPage(currentPage + 1)">
      Next
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M9 18l6-6-6-6" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </button>
  </div>
</div>

<!-- Article Detail Modal -->
<div class="modal-overlay" *ngIf="showModal" (click)="closeModal()">
  <div class="modal-content article-modal" (click)="$event.stopPropagation()">
    <button class="btn-close" (click)="closeModal()">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M18 6L6 18M6 6l12 12" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </button>

    <div class="modal-image" *ngIf="selectedArticle">
      <img [src]="selectedArticle.thumbnail" [alt]="selectedArticle.title">
    </div>

    <div class="modal-body" *ngIf="selectedArticle">
      <span class="category-badge">{{selectedArticle.category}}</span>
      <h2>{{selectedArticle.title}}</h2>
      
      <div class="article-meta">
        <span>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" stroke-width="2"/>
          </svg>
          {{selectedArticle.authors}}
        </span>
        <span>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <rect x="3" y="4" width="18" height="18" rx="2" stroke-width="2"/>
            <line x1="16" y1="2" x2="16" y2="6" stroke-width="2" stroke-linecap="round"/>
            <line x1="8" y1="2" x2="8" y2="6" stroke-width="2" stroke-linecap="round"/>
          </svg>
          {{selectedArticle.publishedDate}}
        </span>
        <span>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" stroke-width="2"/>
            <path d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" stroke-width="2"/>
          </svg>
          {{selectedArticle.views}} views
        </span>
      </div>

      <div class="abstract-section">
        <h3>Abstract</h3>
        <p>{{selectedArticle.abstract}}</p>
      </div>

      <div class="keywords-section" *ngIf="selectedArticle.keywords">
        <h3>Keywords</h3>
        <div class="keywords">
          <span class="keyword" *ngFor="let keyword of selectedArticle.keywords">{{keyword}}</span>
        </div>
      </div>

      <div class="modal-actions">
        <button class="btn-primary" (click)="downloadArticle(selectedArticle)">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3" stroke-width="2" stroke-linecap="round"/>
          </svg>
          Download Full Paper
        </button>
        <button class="btn-secondary" (click)="toggleBookmark(selectedArticle)">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" [attr.fill]="selectedArticle.isBookmarked ? 'currentColor' : 'none'">
            <path d="M19 21l-7-5-7 5V5a2 2 0 012-2h10a2 2 0 012 2z" stroke-width="2"/>
          </svg>
          {{selectedArticle.isBookmarked ? 'Remove Bookmark' : 'Bookmark'}}
        </button>
      </div>
    </div>
  </div>
</div>